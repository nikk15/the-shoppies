(this["webpackJsonpthe-shoppies"]=this["webpackJsonpthe-shoppies"]||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/cinema.84107fd8.svg"},19:function(e,t,a){e.exports=a.p+"static/media/mail.a8752ad4.svg"},20:function(e,t,a){e.exports=a.p+"static/media/goal.2524395e.svg"},26:function(e,t,a){e.exports=a(58)},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(15),i=a.n(o),r=a(23),c=a(2),l=a(16),m=a(17),u=a(25),d=a(22),h=(a(31),a(32),a(18)),f=a.n(h);var v=function(e){return s.a.createElement("header",{className:"search"},s.a.createElement("img",{className:"search__icon",src:f.a,alt:"popcorn"}),s.a.createElement("div",{className:"search__details"},s.a.createElement("h1",{className:"search__header"},"The Shoppies"),s.a.createElement("form",null,s.a.createElement("input",{placeholder:"Find a movie to nominate...",className:"search__input",name:"search",onChange:function(t){return e.searchHandler(t.target.value)}}))))},p=(a(33),a(19)),E=a.n(p);var _=function(e){return s.a.createElement("header",{className:"banner"},s.a.createElement("img",{className:"banner__icon",src:E.a,alt:"envelope"}),s.a.createElement("div",{className:"banner__details"},s.a.createElement("h2",{className:"banner__header"},"And the nominees are..."),s.a.createElement("p",null,e.nominees.map((function(e,t){return s.a.createElement("span",{key:e.imdbID,className:"banner__nominee--".concat(t)},4!==t?"".concat(e.Title,", "):e.Title)})))))},b=(a(34),a(24));a(35),a(36);var N=function(e){return s.a.createElement("button",{onClick:e.nominationHandler,className:"button "+e.class,disabled:!e.enabled},e.class)},g=a(20),y=a.n(g);var w=function(e){var t=Object(n.useState)(""),a=Object(b.a)(t,2),o=a[0],i=a[1],r=Object(n.useRef)();return Object(n.useEffect)((function(){if(o){var t=setTimeout((function(){e.nominationHandler(e.movie)}),400);return r.current=t,function(){return clearTimeout(r.current)}}}),[o]),s.a.createElement("li",{className:"movie".concat(e.added?" movie--added":"").concat(o)},s.a.createElement("img",{className:"N/A"===e.poster?"movie__trophy":"movie__poster",src:"N/A"===e.poster?y.a:e.poster,alt:"N/A"===e.poster?"trophy":"Poster"}),s.a.createElement("div",{className:"movie__details"},s.a.createElement("h3",{className:"movie__title"},e.title),s.a.createElement("p",{className:"movie__year"},e.year)),s.a.createElement(N,{nominationHandler:function(){return t=e.movie,void("remove"===e.class?i(" movie--remove"):e.nominationHandler(t));var t},class:e.class,enabled:e.enabled,movie:e.movie}))};a(37);var S=function(e){return s.a.createElement("li",{className:"loading"},s.a.createElement("div",{className:"loading__poster"}),s.a.createElement("div",{className:"loading__details"},s.a.createElement("div",{className:"loading__title"}),s.a.createElement("div",{className:"loading__year"})),s.a.createElement("div",{className:"loading__button"}))};var I=function(e){return s.a.createElement("section",{className:"results"},s.a.createElement("h2",{className:"results__header"},"Movies: "),!e.searchInProgress&&!e.results.length&&s.a.createElement("h3",{className:"results__empty"},"Not sure what to nominate? Search your favourite movies above!"),!!e.results.length&&s.a.createElement("ul",{className:"results__list"},e.results.map((function(t){return s.a.createElement(w,{poster:t.Poster,title:t.Title,year:t.Year,key:t.imdbID,movie:t,nominationHandler:e.nominationHandler,class:"nominate",enabled:!t.nominated&&!e.complete})}))),!e.results.length&&e.searchInProgress&&s.a.createElement("ul",{className:"results__list"},s.a.createElement(S,null),s.a.createElement(S,null),s.a.createElement(S,null)))};a(38);var O=function(e){return s.a.createElement("section",{className:"nominations"},s.a.createElement("h2",{className:"nominations__header"},"Your Nominations:"),e.nominations.length?s.a.createElement("ul",{className:"nominations__list"},e.nominations.map((function(t,a){return s.a.createElement(w,{poster:t.Poster,title:t.Title,year:t.Year,key:t.imdbID,movie:t,nominationHandler:e.nominationHandler,class:"remove",enabled:!0,added:!(a!==e.nominations.length-1||!e.added)})}))):s.a.createElement("h3",{className:"nominations__empty"},"You haven't nominated any movies yet."))},j=a(21),k=a.n(j);a(55).config();var D=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={search:"",results:[],nominations:[],searching:!1,added:!1},e.handleSearch=function(t){e.setState({search:t,searching:!0})},e.addNomination=function(t){var a=e.state.results.map((function(e){return t.imdbID===e.imdbID?Object(c.a)(Object(c.a)({},e),{},{nominated:!0}):e}));e.setState({results:a,nominations:[].concat(Object(r.a)(e.state.nominations),[t]),added:!0},(function(){return localStorage.setItem("nominations",JSON.stringify(e.state.nominations))}))},e.removeNomination=function(t){var a=e.state.results.map((function(e){return t.imdbID===e.imdbID?Object(c.a)(Object(c.a)({},e),{},{nominated:!1}):e})),n=e.state.nominations.filter((function(e){return e.imdbID!==t.imdbID}));e.setState({results:a,nominations:n},(function(){return localStorage.setItem("nominations",JSON.stringify(e.state.nominations))}))},e.updateNominatedResults=function(t){var a={};return e.state.nominations.forEach((function(e){return a[e.imdbID]=!0})),t.map((function(e){return a[e.imdbID]?Object(c.a)(Object(c.a)({},e),{},{nominated:!0}):e}))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("nominations");null!==e&&this.setState({nominations:JSON.parse(e)})}},{key:"componentDidUpdate",value:function(e){var t=this;e.search!==this.state.search&&!0===this.state.searching&&(""===this.state.search?this.setState({results:[],searching:!1}):k.a.get("".concat("https://www.omdbapi.com/","?s=").concat(this.state.search,"&apikey=").concat("b105ace1")).then((function(e){e.data.Search&&t.setState({results:t.updateNominatedResults(e.data.Search),searching:!1})})).catch((function(e){return console.log("Unable to fetch movies: ".concat(e))})))}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},5!==this.state.nominations.length?s.a.createElement(v,{searchHandler:this.handleSearch}):s.a.createElement(_,{nominees:this.state.nominations}),s.a.createElement("main",{className:"main"},s.a.createElement(I,{results:this.state.results,nominationHandler:this.addNomination,complete:5===this.state.nominations.length,searchInProgress:!!this.state.search}),s.a.createElement(O,{nominations:this.state.nominations,nominationHandler:this.removeNomination,added:this.state.added})),s.a.createElement("footer",null,"Icons made by ",s.a.createElement("a",{href:"http://www.freepik.com/",title:"Freepik"},"Freepik")," from ",s.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com")))}}]),a}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.ceb0e844.chunk.js.map